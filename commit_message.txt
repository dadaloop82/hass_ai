feat: improve agent check and error handling in frontend